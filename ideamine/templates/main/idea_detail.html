{% extends "main.html" %}
{% load comments %}

{% block title %}{{ object.short_name|title }}{% endblock %}

{% block content %}
<h1>{{ object.short_name|title }}</h1>
{% comment %}
<table>
  <tr>
	<th>Owner:</th>
	<td><a href="{% url user_detail object.owner.user.id %}">{{ object.owner }}</a></td>
  </tr>
  <tr>
	<th>Created:</th>
	<td>{{ object.created_at }}</td>
  </tr>
  <tr>
	<th>Current Members:</th>
	<td>{{ object.members.all.count }}</td>
  </tr>
</table>
{% endcomment %}
<div class="descrpitonblock">
  <div class="description"><p>Description</p>
  </div>
  <div class="memberlist"><p>MemberList</p>
  </div>
  <div class="clear"></div>
</div>
{% if user.get_profile == object.owner %}
{% with object.unconfirmed_members as object_list %}
{% with True as edit %}
{% include 'auth/user_table.html' %}
{% endwith %}{% endwith %}

{% else %}

{% if not user.get_profile in object.members.all %}
<p><a href="{% url user_join_idea object.pk %}">Join Idea</a></p>
{% else %}
<p><a href="{% url user_leave_idea object.pk %}">Leave Idea</a></p>
{% endif %}

{% endif %}

{% render_comment_list for object %}
{% if user.is_authenticated %}
{% render_comment_form for object %}
{% endif %}
{% endblock %}
